Refactored the code to comply with functional programming principles.